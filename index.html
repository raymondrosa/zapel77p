<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZAPEL77P - Generador Input</title>
    <style>
        body {font-family: Arial; margin: 20px; background: #f4f4f4;}
        .section {background: white; padding: 15px; margin: 10px 0; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);}
        input, textarea, button {margin: 5px; padding: 8px; font-size: 14px;}
        table {width: 100%; border-collapse: collapse; margin: 10px 0;}
        th, td {border: 1px solid #ccc; padding: 6px; text-align: center;}
        th {background: #0066cc; color: white;}
        button {background: #0066cc; color: white; border: none; cursor: pointer; border-radius: 5px;}
        button:hover {background: #0055aa;}
        #output {width: 100%; height: 400px; font-family: monospace; padding: 10px; background: #f8f8f8;}
        .add {background: #28a745;}
        .del {background: #dc3545; color: white;}
    </style>
</head>
<body>

<h1 style="text-align:center; color:#0066cc;">ZAPEL77P - Generador de Input</h1>

<div class="section">
    <label>Número de casos:</label>
    <input type="number" id="kasos" value="1" min="1">
    <button onclick="init()">Actualizar Casos</button>
</div>

<div id="cases"></div>

<button onclick="generate()" style="font-size:18px; padding:12px 30px;">GENERAR input.txt</button>
<textarea id="output" placeholder="Aquí aparecerá el input formateado..."></textarea>
<button onclick="download()">DESCARGAR input.txt</button>

<script>
// --- DATOS ---
let cases = [];

function init() {
    const n = parseInt(document.getElementById('kasos').value) || 1;
    const container = document.getElementById('cases');
    container.innerHTML = '';
    cases = [];

    for (let i = 1; i <= n; i++) {
        const div = document.createElement('div');
        div.className = 'section';
        div.innerHTML = `
            <h3>Caso ${i}</h3>
            <textarea class="desc" placeholder="Descripción (80 caracteres)" style="width:100%;">Viga simple L=10ft</textarea>

            <label>nm:</label><input class="nm" value="1">
            <label>nn:</label><input class="nn" value="2">
            <label>na:</label><input class="na" value="2">
            <label>E:</label><input class="E" value="360000.0"><br><br>

            <h4>Elementos</h4>
            <table><thead><tr>
                <th>#</th><th>Ni</th><th>Nj</th><th>Ii</th><th>A</th><th>L</th><th>k0</th><th>Acc
